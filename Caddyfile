{
    # Global options
    auto_https off
    admin off
}

:80 {
    # Enable FrankenPHP
    php_server

    # Set the document root
    root * /app/public

    # Enable compression
    encode gzip

    # Laravel specific handling
    try_files {path} {path}/ /index.php?{query}
    
    # Handle PHP files
    php_fastcgi unix//var/run/php-fpm.sock {
        resolve_root_symlink
        root /app/public
    }
    
    # Serve static files
    file_server

    # Log to stdout for Coolify to capture
    log {
        output stdout
        format console
    }
}